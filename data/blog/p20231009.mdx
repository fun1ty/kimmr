---
title: Full Stack Mini project | React, node.js
date: '2023-10-09'
tags: ['[í¬ìŠ¤ì½”xì½”ë”©ì˜¨] ì›¹ê°œë°œì í’€ìŠ¤íƒ ê³¼ì •', 'React', 'node.js', 'MVC', 'MySQL']
draft: false
summary: Reactì™€ node.jsë¥¼ ì‚¬ìš©í•´ ë‚˜ë§Œì˜ Todo appì„ ë§Œë“¤ì–´ë³´ì
---

<strong>í”„ë¡œì íŠ¸ ê¹ƒí—ˆë¸Œ ì£¼ì†Œ</strong> ğŸ‘‰ https://github.com/fun1ty/TodoApp <br />

<h2>Intro</h2>
ì¶”ì„ë•Œ ê³¼ì œë¡œ ë¯¸ë‹ˆí”„ë¡œì íŠ¸ê°€ ì£¼ì–´ì ¸ í•˜ê²Œë˜ì—ˆë‹¤. ì„œë²„ê¹Œì§€ ë„ìš°ì§„ ëª»í–ˆëŠ”ë° ì¡°ë§Œê°„ ë„ìš¸ ìƒê°ì´ë‹¤. í”„ë¡œì íŠ¸
êµ¬ì„±ì€ MVCíŒ¨í„´ìœ¼ë¡œ Reactë¡œëŠ” í”„ë¡ íŠ¸, node.jsë¡œ backë‹¨ì„ êµ¬ì„±í–ˆê³  sequelizeë¡œ DBë¥¼ ì •ì˜í•˜ì˜€ë‹¤. ê·¸ë¦¬ê³ 
style-componentë¡œ ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ì— ìŠ¤íƒ€ì¼ì„ ì ìš©í•˜ì˜€ë‹¤.

<h2>ìš”êµ¬ì‚¬í•­</h2>
í”„ë¡œì íŠ¸ ìš”êµ¬ì‚¬í•­ì€ ì•„ë˜ì™€ ê°™ë‹¤.

<h3>ë°±ì—”ë“œ</h3>

1. í…Œì´ë¸” êµ¬ì¡°
   |Field|Type|Null|Key|Default|Extra|
   |----|----|----|----|----|----|
   |id|int|No|PRI|NULL|auto_increment|
   |title|varchar(100)|No||NULL||
   |done|tinyint(1)|No||0||

2. REST API

- `GET /todos` - show all todos
- `POST /todo` - create a new todo
- `PATCH /todo/:todoId` -edit a specific todo
- `DELETE /todo/:todoId` -remove a specific todo

<h3>í”„ë¡ íŠ¸ì—”ë“œ</h3>

1. Todo ì»´í¬ë„ŒíŠ¸ ìƒì„±
2. Todo ì¶”ê°€í•  UI ì œì‘ - inputì— text ì…ë ¥ í›„ ë²„íŠ¼(and ì—”í„°í‚¤) í´ë¦­ì‹œ ì¶”ê°€
3. Todo ì‚­ì œ - ì‚­ì œë²„íŠ¼ìœ¼ë¡œ ëª©ë¡ ì‚­ì œ
4. Todo ìˆ˜ì • - ì²´í¬ë°•ìŠ¤ì— ì²´í¬í•´ì„œ doneê°’ ë³€ê²½, í• ì¼ ëª©ë¡ í´ë¦­ ì‹œ ìˆ˜ì •ì´ ê°€ëŠ¥í•˜ë©° ì—”í„°í‚¤ í´ë¦­ ì‹œ ì…ë ¥ë‚´ìš© ì €ì¥

<h2>ê·¸ë ‡ê²Œ ë§Œë“¤ì–´ì§„ Todo app</h2>
ê¸°ë³¸ì ì¸ CRUDê°€ ê°€ëŠ¥í•˜ë„ë¡ êµ¬í˜„í•˜ì˜€ë‹¤. ì´ë¯¸ ë“±ë¡ëœ To-do Listì™€ ë™ì¼í•œ ë‚´ìš©ì„ ì…ë ¥í•˜ë©´ ì•Œë¦¼ì°½ì´ ëœ¨ë©°
ë“±ë¡ì´ ë˜ì§€ ì•ŠëŠ”ë‹¤.
<Image alt="todo-app" src="/static/images/ë¦¬ì•¡íŠ¸,ë…¸ë“œ ë¯¸ë‹ˆ í”„ë¡œì íŠ¸.gif" width={400} height={400} />

DBì—” ì´ëŸ°ì‹ìœ¼ë¡œ ë“¤ì–´ê°„ë‹¤.

<Image
  alt="todo-app_DB"
  src="/static/images/ë¦¬ì•¡íŠ¸,ë…¸ë“œ ë¯¸ë‹ˆí”„ë¡œì íŠ¸DB.svg"
  width={400}
  height={100}
/>

<h2>ë””ë ‰í† ë¦¬ êµ¬ì¡°</h2>
node.js ë¡œ í´ë”ë¥¼ ë¨¼ì € ì„¸íŒ…í•˜ê³  ê·¸ ì•ˆì— ë¦¬ì•¡íŠ¸ íŒŒì¼ì„ ë„£ì—ˆë‹¤. ì–´ì°¨í”¼ ë³´ì—¬ì§€ëŠ” í˜ì´ì§€ëŠ” í•˜ë‚˜ë¼ ë¼ìš°í„°
íŒŒì¼ì„ ë”°ë¡œ ë¶„ë¦¬í•  í•„ìš”ì„±ì„ ëŠë¼ì§€ ëª»í•´ server.jsì— í•œêº¼ë²ˆì— ê²½ë¡œë¥¼ ì •ì˜í•˜ì˜€ë‹¤.

```
C:.
â”‚ .gitignore  //node.js
â”‚ package-lock.json
â”‚ package.json
â”‚ server.js
â”‚
â”œâ”€client //ë¦¬ì•¡íŠ¸í´ë”
â”‚ â”‚ .gitignore
â”‚ â”‚ package-lock.json
â”‚ â”‚ package.json
â”‚ â”‚ README.md
â”‚ â”‚
â”‚ â””â”€src
â”‚ App.js
â”‚ index.js
â”‚ Router.js
â”‚ Todo.js
â”‚
â”œâ”€config
â”‚ config.json
â”‚
â”œâ”€controller
â”‚ Ctodo.js
â”‚
â”œâ”€models
â”‚ index.js
â”‚ Todo.js
â”‚
â””â”€src
setupProxy.js

```

í™˜ê²½ì„¸íŒ…ì´ ì–´ëŠì •ë„ ì™„ë£Œë˜ë©´ ì´ì œ ì´ëŸ° ìƒê°ì´ ë“ ë‹¤.
ë””ë ‰í† ë¦¬ëŠ” êµ¬ì„±ë˜ì—ˆê³  ì´ì œ Reactì™€ node.jsëŠ” ì–´ë–»ê²Œ ë°ì´í„°ë¥¼ ì£¼ê³  ë°›ì„ ìˆ˜ ìˆì„ê¹Œ? ReactëŠ” ê¸°ë³¸í¬íŠ¸ê°€ 3000ë²ˆì´ê³  nodeëŠ” 8000ë²ˆì¸ë°? ê·¸ë˜ì„œ ì•„ë˜ì™€ ê°™ì€ ë°©ë²•ìœ¼ë¡œ í•´ê²°í•˜ì˜€ë‹¤.

<h2>Reactì™€ node.js ì—°ê²°í•˜ê¸°</h2>
<h3>1. package.json ì„¸íŒ…</h3>
ë°ì´í„°ê°€ ê³„ì† í†µì‹ ì´ ì•ˆë˜ì„œ ì´ê²ƒì €ê²ƒ ì°¾ì•„ë³´ë‹ˆê¹Œ ë¦¬ì•¡íŠ¸ package.jsonì— í†µì‹ í•  ì„œë²„ë¥¼ ì •ì˜í•´ì¤˜ì•¼í•œë‹¤ê³ 
í•œë‹¤. ê·¸ë˜ì„œ ì•„ë˜ì™€ ê°™ì´ `"proxy": "http://localhost:8000"`ë¥¼ ì¶”ê°€í•˜ì—¬ node.jsì„œë²„ ì£¼ì†Œë¥¼
ë„£ì–´ì£¼ì—ˆë‹¤. (nodeì˜ package.jsonì—ëŠ” ë„£ì§€ ì•ŠëŠ”ë‹¤. ì‚¬ì‹¤ ê³„ì† ì•ˆë˜ê¸¸ë˜ src/setupProxy.js íŒŒì¼ì„ ë§Œë“¤ì–´
ë¦¬ì•¡íŠ¸ ì„œë²„ì£¼ì†Œë¥¼ ë„£ì—ˆìœ¼ë‚˜ ì—†ì–´ë„ ì˜ ëœë‹¤. ì•ˆë˜ì—ˆë˜ê±´ app.post("/todo", (req, res) ê°™ì´ appìœ¼ë¡œ
ì—°ê²°í–ˆì–´ì•¼ í–ˆëŠ”ë° router.post ë¡œ ì—°ê²°í•´ì„œ ê³„ì† ë°ì´í„°ê°€ í†µì‹ ì´ ë˜ì§€ ì•Šì•˜ë˜ ê±°ì˜€ë‹¤...)

```
{
  "name": "client",
  "version": "0.1.0",
  "private": true,
  "proxy": "http://localhost:8000"
  }
```

<h3>2. server.js ì„¸íŒ…(node.js)</h3>

todo/src/server.jsë¥¼ ì•„ë˜ì™€ ê°™ì´ ì„¤ì •í•œë‹¤. nodeì˜ íŒŒì¼ì´ë‹¤.
ë¦¬ì•¡íŠ¸ì™€ nodeê°€ ì„œë¡œ í†µì‹ ì„ í•˜ë ¤ë©´`npm install cors`ë¡œ corsë¥¼ ì„¤ì¹˜í•œë‹¤. corsëŠ” (Cross-Origin Resource Sharing)ìœ¼ë¡œ ì²˜ìŒ ë¦¬ì†ŒìŠ¤ë¥¼ ì œê³µí•œ ë„ë©”ì¸(Origin)ì´ í˜„ì¬ ìš”ì²­í•˜ë ¤ëŠ” ë„ë©”ì¸ê³¼ ë‹¤ë¥´ë”ë¼ë„ ìš”ì²­ì„ í—ˆë½í•´ì£¼ëŠ” ì›¹ ë³´ì•ˆ ë°©ì¹¨ì´ë‹¤. cors ì„¸íŒ…ì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ì€ https://www.npmjs.com/package/cors ì—¬ê¸°ì—ì„œ í™•ì¸ í•  ìˆ˜ ìˆë‹¤.

ì½”ë“œì— ì£¼ì„ìœ¼ë¡œ ì„¤ëª…ì„ ì¶”ê°€í•˜ì˜€ë‹¤.

```
const http = require("http");
const express = require("express");
const db = require("./models");
const cors = require("cors");
const controller = require("./controller/Ctodo");

const PORT = 8000;
const app = express();
const server = http.createServer(app);

//body-parser
app.use(express.urlencoded({ extended: true }));
app.use(express.json());

app.use(
  cors({
    origin: "*",
    methods: ["GET", "POST", "PATCH", "DELETE"],
    credentials: true,
  })
);
app.use(express.urlencoded({ extended: true }));

app.use(express.static(__dirname + "/client/build")); //ë¦¬ì•¡íŠ¸ ë¹Œë“œ íŒŒì¼ ë“±ë¡
(ê·¸ë˜ì•¼ ë¦¬ì•¡íŠ¸ê°€ í™”ë©´ì„ ê·¸ë ¤ì¤Œ)

app.get("/todo", (req, res) => { //axiosë¡œ ë³´ë‚´ì¤€ ë°ì´í„°ë¥¼ controllerë¡œ ì—°ê²°
  controller.ToDoList(req, res);
});

app.post("/todo", (req, res) => {
  controller.ToDoCreate(req, res);
});

app.patch("/todo/:id", (req, res) => {
  controller.ToDoUpdate(req, res);
});

app.delete("/todo/:id", (req, res) => {
  controller.ToDoDelete(req, res);
});

app.get("*", function (req, res) {
  res.sendFile(path.join(__dirname, "/client/build/index.html"));
}); //ëª¨ë“  ê²½ë¡œëŠ” ë¦¬ì•¡íŠ¸ ë¹Œë“œì˜ index.htmlë¡œ ì—´ë¦¬ê²Œ ì„¤ì •

//server start
db.sequelize.sync({ force: false }).then(() => {
  server.listen(PORT, () => {
    console.log(`http://localhost:${PORT}`);
  });
});

```

<h2>ë³¸ê²©ì ìœ¼ë¡œ ê°œë°œí•˜ê¸°</h2>

ì¼ì¼íˆ ëª¨ë“  ì½”ë“œë¥¼ ë‹¤ ì ê¸°ë³´ë‹¤ëŠ” íŠ¹ì •í•œ ë¶€ë¶„ë§Œ ì‘ì„±í•˜ê³ ì í•œë‹¤. (ìƒì„¸ì½”ë“œëŠ” ìœ„ ê¹ƒí—ˆë¸Œì£¼ì†Œë¡œ ë“¤ì–´ê°€ë©´
í™•ì¸ì´ ê°€ëŠ¥í•˜ë‹¤.) ëª¨ë“  êµ¬ë¬¸ì€ ë¹„ë™ê¸°ì²˜ë¦¬ë¥¼ í•˜ì˜€ë‹¤.

<h3>useEffect Hookìœ¼ë¡œ ë¼ì´í”„ì‚¬ì´í´ ê´€ë¦¬</h3>
useEffect Hookìœ¼ë¡œ í™”ë©´ì´ ê°€ì¥ ì²˜ìŒ ëœë”ë§ ì‹œ DBì— ê°’ì´ ìˆìœ¼ë©´ ê°€ì ¸ì˜¤ê²Œ êµ¬í˜„í•˜ì˜€ë‹¤.

```
//ë¦¬ì•¡íŠ¸
useEffect(() => {
    const axiosGetData = async () => {
      const res = await axios({
        method: "GET",
        url: "http://localhost:8000/todo",
      });
      console.log(res);
      const newTodos = res.data.toDoList.map((value) => ({
        id: value.id,
        title: value.title,
        done: value.done,
        checked: false,
      }));

      setTodos((prevTodos) => [...prevTodos, ...newTodos]);
    };
    axiosGetData();
  }, []);
```

```
//controller(node.js)
exports.ToDoList = async (req, res) => {
  try {
    const toDoList = await Todo.findAll({});
    if (!toDoList) {
      res.send({ data: null });
    } else {
      res.send({ toDoList });
    }
  } catch (error) {
    console.log(error);
  }
};

```

<h3>useState Hookìœ¼ë¡œ ìƒíƒœê´€ë¦¬</h3>
To-do List ì¶”ê°€ ê¸°ëŠ¥ì€ ì•„ë˜ì™€ ê°™ë‹¤. useState í•¨ìˆ˜ì— ê°’ì´ ë³€ê²½ë˜ë©´ state ë³€ìˆ˜ë‚˜ í˜¹ì€ ë°°ì—´ì— ë³€ê²½ëœ ê°’ì„
ë„£ì–´ì¤€ë‹¤.{' '}

```
const [todos, setTodos] = useState([]);
const [inputTodo, setInputTodo] = useState("");
```

```
// í™”ë©´ì— ìˆëŠ” input
<_writeDiv>
        <_Input
          type="text"
          value={inputTodo}
          onChange={(e) => setInputTodo(e.target.value)}
          placeholder="Add Todo here"
        />
        <_button onClick={addTodo}>+</_button>
      </_writeDiv>

```

```
// inputì— í• ì¼ ì…ë ¥ í›„ '+'ë²„íŠ¼ ëˆ„ë¥´ë©´ addTodoí•¨ìˆ˜ ì‹¤í–‰
const addTodo = () => {
    if (inputTodo !== "") {
      const axiosTodoUp = async () => {
        const data = {
          title: inputTodo,
          done: 0,
        };
        try {
          const res = await axios({
            method: "POST",
            url: "http://localhost:8000/todo",
            data: data,
          });
          console.log(res);
          if (res.data && res.data.data) {
            const newTodo = {
              id: res.data.id,
              title: inputTodo,
              checked: false,
              done: res.data.done,
            };
            console.log(todos);
            setTodos([...todos, newTodo]);
            setInputTodo("");
          } else {
            alert("ì´ë¯¸ ìˆëŠ” ëª©ë¡ì…ë‹ˆë‹¤.");
          }
        } catch (error) {
          console.log(error);
        }
      };
      axiosTodoUp();
    }
  };
```

```
//controller(node.js)

exports.ToDoCreate = async (req, res) => {
  try {
    const { title, done } = req.body;

    const titleInfo = await Todo.findOne({
      where: { title: title },
    });
    if (!titleInfo) {
      const result = await Todo.create({
        title: title,
        done: done,
      });
      if (result) {
        res.send({ data: result });
      }
    } else {
      res.send({ data: false });
    }
  } catch (error) {
    console.log(error);
  }
};

```

ìˆ˜ì •ê¸°ëŠ¥ì€ To-do List ìˆ˜ì • í›„ ì—”í„°í‚¤ë¥¼ ëˆ„ë¥´ë©´ editUpdateTodo í•¨ìˆ˜ê°€ ì‘ë™ë˜ë„ë¡ êµ¬í˜„í•˜ì˜€ë‹¤.

```
//To-do ì…ë ¥ ëª©ë¡ì°½
<_ListInput
      type="text"
      value={todo.title}
      onKeyDown={(e) => enterkey(todo.id, e)}
      onChange={(e) => titleChange(todo.id, e.target.value)}
    />
```

```
// ì—”í‹°í‚¤ í•¨ìˆ˜ ì‘ë™ í›„ ëª©ë¡ ìˆ˜ì • í•¨ìˆ˜ ì‘ë™
const enterkey = async (id, e) => {
    if (e.key === "Enter") {
      await editUpdateTodo(id, e.target.value);
    }
  };

  const editUpdateTodo = async (id, title) => {
    setReadOnly(false);
    console.log("id", id);
    const data = {
      id: id,
      title: title,
      done: 1,
    };
    try {
      const res = await axios({
        method: "PATCH",
        url: `http://localhost:8000/todo/${id}`,
        data: data,
      });
      // í¸ì§‘ ëª¨ë“œ ì¢…ë£Œ ë° ìƒíƒœ ì—…ë°ì´íŠ¸
      if (res) {
        const updatedTodos = todos.map((todo) =>
          todo.id === id ? { ...todo, title: title, done: 0 } : todo
        );
        setTodos(updatedTodos);
        setReadOnly(true);
      }
    } catch (error) {
      console.error("ì—ëŸ¬ ë°œìƒ: ", error);
    }
  };
```

```
//controller(node.js)
exports.ToDoUpdate = async (req, res) => {
  try {
    const { id, title, done } = req.body;
    const idInfo = await Todo.findOne({
      where: { id: id },
    });
    if (idInfo) {
      const result = await Todo.update(
        { title: title, done: done },
        { where: { id: id } }
      );
      if (result) {
        res.send({ result });
      }
    }
  } catch (error) {
    console.log(error);
  }
};
```

<h3>Styled-Components</h3>
Styled Componentsë¡œ ì»´í¬ë„ŒíŠ¸ë¥¼ ìŠ¤íƒ€ì¼ í•˜ì˜€ë‹¤. ê·¸ ì¤‘ì—ì„œ ì²´í¬ë°•ìŠ¤ë¥¼ ê¾¸ë¯¸ëŠ” ë°©ë²•ì„ ì‘ì„±í•˜ê³ ì í•œë‹¤. <br />
ì•„ë˜ ì´ë¯¸ì§€ëŠ” ì²´í¬ë°•ìŠ¤ í´ë¦­ ì‹œ ë³€ê²½ë˜ëŠ” ìŠ¤íƒ€ì¼ì´ë‹¤.{' '}

<Image alt="todocheck" src="/static/images/todocheck.png" width={400} height={65} />

```
// ì²´í¬ë°•ìŠ¤ê°€ ëœ¨ëŠ” ë¶€ë¶„
{todos.map((todo) => {
          return (
            <_li key={todo.id} id={todo.id}>
                <HiddenCheckBox
                  type="checkbox" //ì²´í¬ë°•ìŠ¤
                  id={`custom-checkbox-${todo.id}`}
                  checked={todo.checked}
                  onChange={() => checkedTodo(todo.id)}
                />

```

```
// ì²´í¬ë°•ìŠ¤ style-component ë¶€ë¶„
const HiddenCheckBox = styled.input`
  appearance: none;
  width: 1.5rem;
  height: 1.5rem;
  border: 1.5px solid gainsboro;
  border-radius: 0.35rem;

  &:checked { //ì²´í¬ë˜ì—ˆì„ ë•Œ ë¶€ë¶„
    border-color: transparent;
    background-image: url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M5.707 7.293a1 1 0 0 0-1.414 1.414l2 2a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0-1.414-1.414L7 8.586 5.707 7.293z'/%3e%3c/svg%3e");
    background-size: 100% 100%;
    background-position: 50%;
    background-repeat: no-repeat;
    background-color: #6499e9;
  }
`;
```

<h2>As a result</h2>ì´ ê³¼ì œ ë•ë¶„ì— Hookì˜ ì‚¬ìš©ë²•ì„ ì¡°ê¸ˆì€ ë‹¤ë£°ìˆ˜ ìˆê²Œ ëœê±°ê°™ë‹¤. ê·¸ë¦¬ê³  node.jsì™€ì˜
ì—°ê²°í•´ì„œ ê°™ì´ ê°œë°œí•´ë³¼ ìˆ˜ ìˆì–´ì„œ ì°¸ ê´œì°®ì€ ì‹œê°„ì´ì˜€ë‹¤. ê·¸ë™ì•ˆ ë¦¬ì•¡íŠ¸ ê³µë¶€ë¥¼ ë§ì´ ëª»í–ˆëŠ”ë°
ê°œì¸í”„ë¡œì íŠ¸ë¥¼ í•˜ë©´ì„œ ë³µìŠµ ê²¸ ì´ê²ƒì €ê²ƒ ë§ì´ í™œìš©í•´ë³¼ ìƒê°ì´ë‹¤.{' '}
